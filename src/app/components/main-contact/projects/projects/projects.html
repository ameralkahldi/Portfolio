<section class="projects">
  <div class="container">
    <h4 class="portfolio-title">{{ 'PROJECTS.PORTFOLIO' | translate }}</h4>
    <h2 class="section-title">{{ 'PROJECTS.FEATURED' | translate }}</h2>
    <p class="subtitle">{{ 'PROJECTS.SUBTITLE' | translate }}</p>

    <div class="project-list-wrapper">
      <div class="project-list">
        @for (project of projects; track $index; let i = $index) {
        <div class="project-box" (mouseenter)="hoveredProjectIndex = i" (mouseleave)="hoveredProjectIndex = null"
          (click)="selectProject(i)" [class.active]="selectedProjectIndex === i">
          <span class="project-title">
            {{ project.title }}
            <img src="assets/icon_skill/arrow_outward.png" alt="arrow" class="title-arrow" />
          </span>
          <span class="tech-stack">
            {{ project.pro.join(' | ') }}
          </span>
        </div>
        }
      </div>


      @if (hoveredProjectIndex !== null) {
      <div class="hover-preview">
        <img [src]="projects[hoveredProjectIndex!].image" [alt]="projects[hoveredProjectIndex!].title"
          class="hover-image" />
      </div>
      }

    </div>

    @if (selectedProject) {
    <div class="project-card-overlay">
      <div class="project-card-modal">
        <div class="project-left">
          <p class="project-id">
            0{{ selectedProjectIndex! + 1 }}
          </p>
          <h3 class="project-title">{{ selectedProject.title }}</h3>
            <p class="project-question text-red">
        {{ selectedProject.frage ? (selectedProject.frage | translate) : ('PROJECTS.DEFAULT_QUESTION' | translate) }}
      </p>

          <div class="project-description" *ngFor="let key of projectKeys">
            {{ ('PROJECTS.DESCRIPTION.' + key) | translate }}
          </div>

         <div class="tech-stack-icons">
  <div class="tech-item" *ngFor="let tech of selectedProject.techStack; let i = index">
    <img [src]="tech.icon.trim()" alt="tech icon" class="tech-icon" />
    <span class="tech-name">{{ selectedProject.pro[i] }}</span>
  </div>
</div>


          <div class="btn-group">
            @if (selectedProject.link) {
            <a [href]="selectedProject.link" target="_blank" class="btn">
              {{ 'PROJECTS.GITHUB' | translate }}
              <img src="assets/icon_skill/arrow_outward.png" alt="Arrow" class="btn-icon" />
            </a>
            }

            @if (selectedProject.testLink) {
            <a [href]="selectedProject.testLink" target="_blank" class="btn btn-secondary">
              {{ 'PROJECTS.LIVE_TEST' | translate }}
              <img src="assets/icon_skill/arrow_outward.png" alt="Arrow" class="btn-icon" />
            </a>
            }
          </div>
          <div class="next-project-mobile" (click)="nextProject()">
            <span class="next-text text-red">{{ 'PROJECTS.NEXT' | translate }}</span>
            <span class="arrow text-red">&rarr;</span>
          </div>
        </div>

        <div class="project-right">
          <img src="assets/icon_skill/23. Close Button.png" alt="Close" class="close-icon"
            (click)="selectedProjectIndex = null" />

          <img [src]="selectedProject.image" [alt]="selectedProject.title" class="project-image" />

          <div class="next-project" (click)="nextProject()">
            <span class="next-text text-red">{{ 'PROJECTS.NEXT' | translate }}</span>
            <span class="arrow text-red">&rarr;</span>
          </div>
        </div>
      </div>
    </div>
    }

  </div>
</section>